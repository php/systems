<IfModule mod_ssl.c>
NameVirtualHost 69.195.199.133:443
<VirtualHost 69.195.199.133:443>
    ServerName pecl.php.net
    ServerAlias www.pecl.php.net
    ServerName pecl2.php.net
    ServerAlias www.pecl2.php.net
    SSLEngine on
    SSLCipherSuite updateit 
    SSLCertificateFile    pecl.php.net.crt
    SSLCertificateKeyFile pecl.php.net.key
    SSLCertificateChainFile pecl.php.net.CA.crt

    SetEnv      PHPDOTNETAPI_KEY        key 
    SetEnv      PHPDOTNETAPI_SECRET     secret 
    SetEnv 	AUTH_TOKEN              "token"

    ServerAdmin pecl-dev@lists.php.net
    CustomLog /var/log/apache2/pecl.php.net-access.log combined
    ErrorLog /var/log/apache2/pecl.php.net-error.log
    DocumentRoot /home/www/pecl.php.net/public_html
    DirectoryIndex index.php index.html
    php_value y2k_compliance on
    php_value include_path .:/home/www/pecl.php.net/include:/usr/local/lib/php
    php_value auto_prepend_file pear-prepend.php
    php_value magic_quotes_gpc off
    php_value magic_quotes_runtime off
    <Directory "/home/www/pecl.php.net/public_html">
      Options Indexes FollowSymLinks
      AllowOverride None
      Order allow,deny
      Allow from all
    </Directory>

    Alias /package /usr/local/www/peclweb/public_html/package-info.php

    RedirectPermanent /rss.php          http://pecl2.php.net/feeds/latest.rss

    # Temp redirect until aliases are in place in the pkg manager, don't remove
    RedirectPermanent /sdo          http://pecl2.php.net/sca_sdo
    RedirectPermanent /package/sdo  http://pecl2.php.net/package/sca_sdo
    RedirectPermanent /sca          http://pecl2.php.net/sca_sdo
    RedirectPermanent /package/sca  http://pecl2.php.net/package/sca_sdo
    RedirectPermanent /activescript http://pecl2.php.net/phpscript
    RedirectPermanent /package/activescript http://pecl2.php.net/package/phpscript


    RewriteEngine On

    #
    # Rewriting rules for the RSS feeds
    #
    RewriteRule   /feeds/(.+)\.rss$ /feeds/feeds.php?type=$1

    #
    # Rewriting rule for the Bug system
    #
    RewriteRule   /bugs/([0-9]+)/*$ /bugs/bug.php?id=$1 [R]

    # Rewriting rules for the account info /user/handle
    RewriteRule   /user/(.+)$ /account-info.php?handle=$1

    # rule for account info /package/pkgname/version
    RewriteRule   /package/(.+)/(.+)$ /package-info.php?package=$1&version=$2
    RewriteRule   /package/(.+)$ /package-info.php?package=$1


    <Location /get>
        ForceType application/x-httpd-php
    </Location>

    ErrorDocument 404 /error/404.php

    <Location /server-status>
        SetHandler server-status
        Order allow,deny
        Allow from all
    </Location>

    <Location />
        Order Deny,Allow
        Deny from env=offlineclient
    </Location>

    <Directory "/home/www/pecl.php.net/public_html/bugs">
        php_flag magic_quotes_gpc on
    </Directory>

    LogLevel warn

    <FilesMatch "\.(cgi|shtml|phtml|php)$">
        SSLOptions +StdEnvVars
    </FilesMatch>
    <Directory /usr/lib/cgi-bin>
        SSLOptions +StdEnvVars
    </Directory>

    BrowserMatch "MSIE [2-6]" \
    nokeepalive ssl-unclean-shutdown \
    downgrade-1.0 force-response-1.0

    # MSIE 7 and newer should be able to use keepalive
    BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown

</VirtualHost>
</IfModule>
